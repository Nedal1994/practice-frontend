{"ast":null,"code":"import _classCallCheck from\"/home/nedal/practice-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/nedal/practice-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/nedal/practice-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/nedal/practice-frontend/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import'bootstrap/dist/css/bootstrap.min.css';import'./BestBooks.css';import{withAuth0}from'@auth0/auth0-react';import axios from'axios';import BookCard from'./BookCard';import Form from'react-bootstrap/Form';import Button from'react-bootstrap/Button';import Modal from'react-bootstrap/Modal';import BookUpdateForm from'./BookUpdateForm';// import BookItem from './BookItem'\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var MyFavoriteBooks=/*#__PURE__*/function(_React$Component){_inherits(MyFavoriteBooks,_React$Component);var _super=_createSuper(MyFavoriteBooks);function MyFavoriteBooks(props){var _this;_classCallCheck(this,MyFavoriteBooks);_this=_super.call(this,props);_this.componentDidMount=function(){var user=_this.props.auth0.user;var email=user.email;axios.get(\"http://localhost:3601/getBooks?email=\".concat(email)).then(function(result){_this.setState({booksArr:result.data});}).catch(function(error){console.log('error');});};_this.addBook=function(event){event.preventDefault();var user=_this.props.auth0.user;var email=user.email;var obj={title:event.target.title.value,description:event.target.description.value,status:event.target.status.value,email:email};axios.post(\"http://localhost:3601/addBook\",obj).then(function(result){_this.setState({booksArr:result.data});}).catch(function(error){console.log('Error');});};_this.deleteBook=function(id){var user=_this.props.auth0.user;var email=user.email;axios.delete(\"http://localhost:3601/deleteBook/\".concat(id,\"?email=\").concat(email)).then(function(result){_this.setState({booksArr:result.data});}).catch(function(error){console.log('Error');});};_this.handleClose=function(){_this.setState({show:false,showFlag:false});};_this.handleShow=function(){_this.setState({show:true});};_this.showUpdateForm=function(item){_this.setState({showFlag:true,title:item.title,description:item.description,status:item.status,bookId:item._id});};_this.updateBook=function(event){event.preventDefault();var user=_this.props.auth0.user;var email=user.email;var obj={title:event.target.title.value,description:event.target.description.value,status:event.target.status.value,email:email};axios.put(\"http://localhost:3601/updateBook/\".concat(_this.state.bookId),obj).then(function(result){_this.setState({booksArr:result.data,showFlag:false});}).catch(function(error){console.log('Error');});};_this.state={booksArr:[],show:false,showFlag:false,title:'',description:'',status:'',bookId:''};return _this;}_createClass(MyFavoriteBooks,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:this.handleShow,children:\"add a book\"}),/*#__PURE__*/_jsxs(Modal,{show:this.state.show,onHide:this.handleClose,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Modal heading\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:\"Woohoo, you're reading this text in a modal!\"}),/*#__PURE__*/_jsxs(Form,{onSubmit:this.addBook,children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Book title\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",name:\"title\"})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Description\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",name:\"description\"})]}),/*#__PURE__*/_jsx(Form.Group,{children:/*#__PURE__*/_jsxs(Form.Select,{name:\"status\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"available\",children:\"Available\"}),/*#__PURE__*/_jsx(\"option\",{value:\"not available\",children:\"Not Available\"})]})}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",children:\"Add book\"})]})]}),this.state.booksArr.map(function(item){return/*#__PURE__*/_jsx(BookCard,{item:item,deleteBook:_this2.deleteBook,showUpdateForm:_this2.showUpdateForm});}),/*#__PURE__*/_jsx(BookUpdateForm,{show:this.state.showFlag,handleClose:this.handleClose,title:this.state.title,description:this.state.description,status:this.state.status,updateBook:this.updateBook})]});}}]);return MyFavoriteBooks;}(React.Component);export default withAuth0(MyFavoriteBooks);","map":{"version":3,"sources":["/home/nedal/practice-frontend/src/BestBooks.js"],"names":["React","withAuth0","axios","BookCard","Form","Button","Modal","BookUpdateForm","MyFavoriteBooks","props","componentDidMount","user","auth0","email","get","then","result","setState","booksArr","data","catch","error","console","log","addBook","event","preventDefault","obj","title","target","value","description","status","post","deleteBook","id","delete","handleClose","show","showFlag","handleShow","showUpdateForm","item","bookId","_id","updateBook","put","state","map","Component"],"mappings":"gbAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,sCAAP,CACA,MAAO,iBAAP,CACA,OAASC,SAAT,KAA0B,oBAA1B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,QAAP,KAAqB,YAArB,CACA,MAAOC,CAAAA,IAAP,KAAiB,sBAAjB,CACA,MAAOC,CAAAA,MAAP,KAAmB,wBAAnB,CACA,MAAOC,CAAAA,KAAP,KAAkB,uBAAlB,CACA,MAAOC,CAAAA,cAAP,KAA2B,kBAA3B,CAEA;gJAEMC,CAAAA,e,8HAEJ,yBAAYC,KAAZ,CAAmB,iDACjB,uBAAMA,KAAN,EADiB,MAanBC,iBAbmB,CAaC,UAAM,IAChBC,CAAAA,IADgB,CACP,MAAKF,KAAL,CAAWG,KADJ,CAChBD,IADgB,CAExB,GAAME,CAAAA,KAAK,CAAGF,IAAI,CAACE,KAAnB,CACAX,KAAK,CACFY,GADH,gDAC+CD,KAD/C,GAEGE,IAFH,CAEQ,SAAAC,MAAM,CAAI,CACd,MAAKC,QAAL,CAAc,CACZC,QAAQ,CAAEF,MAAM,CAACG,IADL,CAAd,EAGD,CANH,EAOGC,KAPH,CAOS,SAAAC,KAAK,CAAI,CACdC,OAAO,CAACC,GAAR,CAAY,OAAZ,EACD,CATH,EAUD,CA1BkB,OA2BnBC,OA3BmB,CA2BT,SAACC,KAAD,CAAW,CACnBA,KAAK,CAACC,cAAN,GADmB,GAEXf,CAAAA,IAFW,CAEF,MAAKF,KAAL,CAAWG,KAFT,CAEXD,IAFW,CAGnB,GAAME,CAAAA,KAAK,CAAGF,IAAI,CAACE,KAAnB,CACA,GAAMc,CAAAA,GAAG,CAAG,CACVC,KAAK,CAAEH,KAAK,CAACI,MAAN,CAAaD,KAAb,CAAmBE,KADhB,CAEVC,WAAW,CAAEN,KAAK,CAACI,MAAN,CAAaE,WAAb,CAAyBD,KAF5B,CAGVE,MAAM,CAAEP,KAAK,CAACI,MAAN,CAAaG,MAAb,CAAoBF,KAHlB,CAIVjB,KAAK,CAAEA,KAJG,CAAZ,CAMAX,KAAK,CACF+B,IADH,iCACyCN,GADzC,EAEGZ,IAFH,CAEQ,SAAAC,MAAM,CAAI,CACd,MAAKC,QAAL,CAAc,CACZC,QAAQ,CAAEF,MAAM,CAACG,IADL,CAAd,EAID,CAPH,EAQGC,KARH,CAQS,SAAAC,KAAK,CAAI,CACdC,OAAO,CAACC,GAAR,CAAY,OAAZ,EACD,CAVH,EAWD,CAhDkB,OAkDnBW,UAlDmB,CAkDN,SAACC,EAAD,CAAQ,IACXxB,CAAAA,IADW,CACF,MAAKF,KAAL,CAAWG,KADT,CACXD,IADW,CAEnB,GAAME,CAAAA,KAAK,CAAGF,IAAI,CAACE,KAAnB,CACAX,KAAK,CACFkC,MADH,4CAC8CD,EAD9C,mBAC0DtB,KAD1D,GAEGE,IAFH,CAEQ,SAAAC,MAAM,CAAI,CACd,MAAKC,QAAL,CAAc,CACZC,QAAQ,CAAEF,MAAM,CAACG,IADL,CAAd,EAGD,CANH,EAOGC,KAPH,CAOS,SAAAC,KAAK,CAAI,CACdC,OAAO,CAACC,GAAR,CAAY,OAAZ,EACD,CATH,EAUD,CA/DkB,OAgEnBc,WAhEmB,CAgEL,UAAM,CAClB,MAAKpB,QAAL,CAAc,CACZqB,IAAI,CAAE,KADM,CAEZC,QAAQ,CAAC,KAFG,CAAd,EAID,CArEkB,OAsEnBC,UAtEmB,CAsEN,UAAM,CACjB,MAAKvB,QAAL,CAAc,CACZqB,IAAI,CAAE,IADM,CAAd,EAGD,CA1EkB,OA2EnBG,cA3EmB,CA2EF,SAACC,IAAD,CAAQ,CACvB,MAAKzB,QAAL,CAAc,CACZsB,QAAQ,CAAC,IADG,CAEZX,KAAK,CAACc,IAAI,CAACd,KAFC,CAGZG,WAAW,CAACW,IAAI,CAACX,WAHL,CAIZC,MAAM,CAACU,IAAI,CAACV,MAJA,CAKZW,MAAM,CAACD,IAAI,CAACE,GALA,CAAd,EAOD,CAnFkB,OAqFnBC,UArFmB,CAqFN,SAACpB,KAAD,CAAU,CACrBA,KAAK,CAACC,cAAN,GADqB,GAEbf,CAAAA,IAFa,CAEJ,MAAKF,KAAL,CAAWG,KAFP,CAEbD,IAFa,CAGrB,GAAME,CAAAA,KAAK,CAAGF,IAAI,CAACE,KAAnB,CACA,GAAMc,CAAAA,GAAG,CAAG,CACVC,KAAK,CAAEH,KAAK,CAACI,MAAN,CAAaD,KAAb,CAAmBE,KADhB,CAEVC,WAAW,CAAEN,KAAK,CAACI,MAAN,CAAaE,WAAb,CAAyBD,KAF5B,CAGVE,MAAM,CAAEP,KAAK,CAACI,MAAN,CAAaG,MAAb,CAAoBF,KAHlB,CAIVjB,KAAK,CAACA,KAJI,CAAZ,CAMAX,KAAK,CACF4C,GADH,4CAC2C,MAAKC,KAAL,CAAWJ,MADtD,EAC+DhB,GAD/D,EAEGZ,IAFH,CAEQ,SAAAC,MAAM,CAAI,CACd,MAAKC,QAAL,CAAc,CACZC,QAAQ,CAAEF,MAAM,CAACG,IADL,CAEZoB,QAAQ,CAAC,KAFG,CAAd,EAKD,CARH,EASGnB,KATH,CASS,SAAAC,KAAK,CAAI,CACdC,OAAO,CAACC,GAAR,CAAY,OAAZ,EACD,CAXH,EAYD,CA3GkB,CAEjB,MAAKwB,KAAL,CAAa,CACX7B,QAAQ,CAAE,EADC,CAEXoB,IAAI,CAAE,KAFK,CAGXC,QAAQ,CAAE,KAHC,CAIXX,KAAK,CAAC,EAJK,CAKXG,WAAW,CAAC,EALD,CAMXC,MAAM,CAAC,EANI,CAOXW,MAAM,CAAC,EAPI,CAAb,CAFiB,aAWlB,C,kDAmGD,iBAAS,iBACP,mBACE,wCACE,KAAC,MAAD,EAAQ,OAAO,CAAC,SAAhB,CAA0B,OAAO,CAAE,KAAKH,UAAxC,wBADF,cAKE,MAAC,KAAD,EAAO,IAAI,CAAE,KAAKO,KAAL,CAAWT,IAAxB,CAA8B,MAAM,CAAE,KAAKD,WAA3C,wBACE,KAAC,KAAD,CAAO,MAAP,EAAc,WAAW,KAAzB,uBACE,KAAC,KAAD,CAAO,KAAP,4BADF,EADF,cAIE,KAAC,KAAD,CAAO,IAAP,2DAJF,cAKE,MAAC,IAAD,EAAM,QAAQ,CAAE,KAAKb,OAArB,wBACE,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,MAAtB,wBACE,KAAC,IAAD,CAAM,KAAN,yBADF,cAEE,KAAC,IAAD,CAAM,OAAN,EAAc,IAAI,CAAC,MAAnB,CAA0B,IAAI,CAAC,OAA/B,EAFF,GADF,cAKE,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,MAAtB,wBACE,KAAC,IAAD,CAAM,KAAN,0BADF,cAEE,KAAC,IAAD,CAAM,OAAN,EAAc,IAAI,CAAC,MAAnB,CAA0B,IAAI,CAAC,aAA/B,EAFF,GALF,cASE,KAAC,IAAD,CAAM,KAAN,wBACE,MAAC,IAAD,CAAM,MAAN,EAAa,IAAI,CAAC,QAAlB,wBACE,eAAQ,KAAK,CAAC,WAAd,uBADF,cAEE,eAAQ,KAAK,CAAC,eAAd,2BAFF,GADF,EATF,cAeE,KAAC,MAAD,EAAQ,OAAO,CAAC,SAAhB,CAA0B,IAAI,CAAC,QAA/B,sBAfF,GALF,GALF,CA8BG,KAAKuB,KAAL,CAAW7B,QAAX,CAAoB8B,GAApB,CAAwB,SAACN,IAAD,CAAU,CACjC,mBACE,KAAC,QAAD,EACA,IAAI,CAAEA,IADN,CAEA,UAAU,CAAE,MAAI,CAACR,UAFjB,CAGA,cAAc,CAAE,MAAI,CAACO,cAHrB,EADF,CAOD,CARA,CA9BH,cAwCE,KAAC,cAAD,EACA,IAAI,CAAI,KAAKM,KAAL,CAAWR,QADnB,CAEA,WAAW,CAAI,KAAKF,WAFpB,CAGA,KAAK,CAAE,KAAKU,KAAL,CAAWnB,KAHlB,CAIA,WAAW,CAAE,KAAKmB,KAAL,CAAWhB,WAJxB,CAKA,MAAM,CAAE,KAAKgB,KAAL,CAAWf,MALnB,CAMA,UAAU,CAAG,KAAKa,UANlB,EAxCF,GADF,CAmDD,C,6BApK2B7C,KAAK,CAACiD,S,EAuKpC,cAAehD,CAAAA,SAAS,CAACO,eAAD,CAAxB","sourcesContent":["import React from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './BestBooks.css';\nimport { withAuth0 } from '@auth0/auth0-react'\nimport axios from 'axios'\nimport BookCard from './BookCard'\nimport Form from 'react-bootstrap/Form'\nimport Button from 'react-bootstrap/Button'\nimport Modal from 'react-bootstrap/Modal'\nimport BookUpdateForm from './BookUpdateForm';\n\n// import BookItem from './BookItem'\n\nclass MyFavoriteBooks extends React.Component {\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      booksArr: [],\n      show: false,\n      showFlag: false,\n      title:'',\n      description:'',\n      status:'',\n      bookId:''\n    }\n  }\n\n  componentDidMount = () => {\n    const { user } = this.props.auth0\n    const email = user.email\n    axios\n      .get(`http://localhost:3601/getBooks?email=${email}`)\n      .then(result => {\n        this.setState({\n          booksArr: result.data\n        })\n      })\n      .catch(error => {\n        console.log('error');\n      })\n  }\n  addBook = (event) => {\n    event.preventDefault()\n    const { user } = this.props.auth0\n    const email = user.email\n    const obj = {\n      title: event.target.title.value,\n      description: event.target.description.value,\n      status: event.target.status.value,\n      email: email\n    }\n    axios\n      .post(`http://localhost:3601/addBook`, obj)\n      .then(result => {\n        this.setState({\n          booksArr: result.data\n        })\n\n      })\n      .catch(error => {\n        console.log('Error');\n      })\n  }\n\n  deleteBook = (id) => {\n    const { user } = this.props.auth0\n    const email = user.email\n    axios\n      .delete(`http://localhost:3601/deleteBook/${id}?email=${email}`)\n      .then(result => {\n        this.setState({\n          booksArr: result.data\n        })\n      })\n      .catch(error => {\n        console.log('Error');\n      })\n  }\n  handleClose = () => {\n    this.setState({\n      show: false,\n      showFlag:false\n    })\n  }\n  handleShow = () => {\n    this.setState({\n      show: true,\n    })\n  }\n  showUpdateForm = (item)=>{\n    this.setState({\n      showFlag:true,\n      title:item.title,\n      description:item.description,\n      status:item.status,\n      bookId:item._id\n    })\n  }\n\n  updateBook = (event) =>{\n    event.preventDefault()\n    const { user } = this.props.auth0\n    const email = user.email\n    const obj = {\n      title: event.target.title.value,\n      description: event.target.description.value,\n      status: event.target.status.value,\n      email:email\n    }\n    axios\n      .put(`http://localhost:3601/updateBook/${this.state.bookId}`,obj)\n      .then(result => {\n        this.setState({\n          booksArr: result.data,\n          showFlag:false\n        })\n\n      })\n      .catch(error => {\n        console.log('Error');\n      })\n  }\n  \n\n  render() {\n    return (\n      <>\n        <Button variant=\"primary\" onClick={this.handleShow}>\n          add a book\n        </Button>\n\n        <Modal show={this.state.show} onHide={this.handleClose}>\n          <Modal.Header closeButton>\n            <Modal.Title>Modal heading</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>Woohoo, you're reading this text in a modal!</Modal.Body>\n          <Form onSubmit={this.addBook} >\n            <Form.Group className=\"mb-3\">\n              <Form.Label>Book title</Form.Label>\n              <Form.Control type=\"text\" name='title' />\n            </Form.Group>\n            <Form.Group className=\"mb-3\">\n              <Form.Label>Description</Form.Label>\n              <Form.Control type=\"text\" name='description' />\n            </Form.Group>\n            <Form.Group >\n              <Form.Select name='status'>\n                <option value='available'>Available</option>\n                <option value='not available'>Not Available</option>\n              </Form.Select>\n            </Form.Group>\n            <Button variant=\"primary\" type=\"submit\">\n              Add book\n            </Button>\n          </Form>\n        </Modal>\n        {this.state.booksArr.map((item) => {\n          return (\n            <BookCard \n            item={item} \n            deleteBook={this.deleteBook} \n            showUpdateForm={this.showUpdateForm}\n            />\n          )\n        })}\n\n        <BookUpdateForm\n        show = {this.state.showFlag}\n        handleClose = {this.handleClose}\n        title={this.state.title}\n        description={this.state.description}\n        status={this.state.status}\n        updateBook ={this.updateBook}\n        />\n      </>\n    )\n  }\n}\n\nexport default withAuth0(MyFavoriteBooks)"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"/home/nedal/practice-frontend/src/BestBooks.js\";\nimport React from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './BestBooks.css';\nimport { withAuth0 } from '@auth0/auth0-react';\nimport axios from 'axios';\nimport BookCard from './BookCard';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport Modal from 'react-bootstrap/Modal';\nimport BookUpdateForm from './BookUpdateForm'; // import BookItem from './BookItem'\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass MyFavoriteBooks extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.componentDidMount = () => {\n      const {\n        user\n      } = this.props.auth0;\n      const email = user.email;\n      axios.get(`http://localhost:3600/getBooks?email=${email}`).then(result => {\n        this.setState({\n          booksArr: result.data\n        });\n      }).catch(error => {\n        console.log('error');\n      });\n    };\n\n    this.addBook = event => {\n      event.preventDefault();\n      const {\n        user\n      } = this.props.auth0;\n      const email = user.email;\n      const obj = {\n        title: event.target.title.value,\n        description: event.target.description.value,\n        status: event.target.status.value,\n        email: email\n      };\n      axios.post(`http://localhost:3600/addBook`, obj).then(result => {\n        this.setState({\n          booksArr: result.data\n        });\n      }).catch(error => {\n        console.log('Error');\n      });\n    };\n\n    this.deleteBook = id => {\n      const {\n        user\n      } = this.props.auth0;\n      const email = user.email;\n      axios.delete(`http://localhost:3600/deleteBook/${id}?email=${email}`).then(result => {\n        this.setState({\n          booksArr: result.data\n        });\n      }).catch(error => {\n        console.log('Error');\n      });\n    };\n\n    this.handleClose = () => {\n      this.setState({\n        show: false,\n        showFlag: false\n      });\n    };\n\n    this.handleShow = () => {\n      this.setState({\n        show: true\n      });\n    };\n\n    this.showUpdateForm = item => {\n      this.setState({\n        showFlag: true,\n        title: item.title,\n        description: item.description,\n        status: item.status,\n        bookId: item._id\n      });\n    };\n\n    this.updateBook = event => {\n      event.preventDefault();\n      const {\n        user\n      } = this.props.auth0;\n      const email = user.email;\n      const obj = {\n        title: event.target.title.value,\n        description: event.target.description.value,\n        status: event.target.status.value,\n        email: email\n      };\n      axios.put(`http://localhost:3600/updateBook/${this.state.bookId}`, obj).then(result => {\n        this.setState({\n          booksArr: result.data,\n          showFlag: false\n        });\n      }).catch(error => {\n        console.log('Error');\n      });\n    };\n\n    this.state = {\n      booksArr: [],\n      show: false,\n      showFlag: false,\n      title: '',\n      description: '',\n      status: '',\n      bookId: ''\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        variant: \"primary\",\n        onClick: this.handleShow,\n        children: \"Launch demo modal\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        show: this.state.show,\n        onHide: this.handleClose,\n        children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n          closeButton: true,\n          children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n            children: \"Modal heading\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"secondary\",\n            onClick: this.handleClose,\n            children: \"Close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            onClick: this.handleClose,\n            children: \"Save Changes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this), this.state.booksArr.map(item => {\n        return /*#__PURE__*/_jsxDEV(BookCard, {\n          item: item,\n          deleteBook: this.deleteBook,\n          showUpdateForm: this.showUpdateForm\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 13\n        }, this);\n      }), /*#__PURE__*/_jsxDEV(BookUpdateForm, {\n        show: this.state.showFlag,\n        handleClose: this.handleClose,\n        title: this.state.title,\n        description: this.state.description,\n        status: this.state.status,\n        updateBook: this.updateBook\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n\n}\n\nexport default _c = withAuth0(MyFavoriteBooks);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["/home/nedal/practice-frontend/src/BestBooks.js"],"names":["React","withAuth0","axios","BookCard","Form","Button","Modal","BookUpdateForm","MyFavoriteBooks","Component","constructor","props","componentDidMount","user","auth0","email","get","then","result","setState","booksArr","data","catch","error","console","log","addBook","event","preventDefault","obj","title","target","value","description","status","post","deleteBook","id","delete","handleClose","show","showFlag","handleShow","showUpdateForm","item","bookId","_id","updateBook","put","state","render","map"],"mappings":"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","sourcesContent":["import React from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './BestBooks.css';\nimport { withAuth0 } from '@auth0/auth0-react'\nimport axios from 'axios'\nimport BookCard from './BookCard'\nimport Form from 'react-bootstrap/Form'\nimport Button from 'react-bootstrap/Button'\nimport Modal from 'react-bootstrap/Modal'\nimport BookUpdateForm from './BookUpdateForm';\n\n// import BookItem from './BookItem'\n\nclass MyFavoriteBooks extends React.Component {\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      booksArr: [],\n      show: false,\n      showFlag: false,\n      title: '',\n      description: '',\n      status: '',\n      bookId: ''\n    }\n  }\n\n  componentDidMount = () => {\n    const { user } = this.props.auth0\n    const email = user.email\n    axios\n      .get(`http://localhost:3600/getBooks?email=${email}`)\n      .then(result => {\n        this.setState({\n          booksArr: result.data\n        })\n      })\n      .catch(error => {\n        console.log('error');\n      })\n  }\n  addBook = (event) => {\n    event.preventDefault()\n    const { user } = this.props.auth0\n    const email = user.email\n    const obj = {\n      title: event.target.title.value,\n      description: event.target.description.value,\n      status: event.target.status.value,\n      email: email\n    }\n    axios\n      .post(`http://localhost:3600/addBook`, obj)\n      .then(result => {\n        this.setState({\n          booksArr: result.data\n        })\n\n      })\n      .catch(error => {\n        console.log('Error');\n      })\n  }\n\n  deleteBook = (id) => {\n    const { user } = this.props.auth0\n    const email = user.email\n    axios\n      .delete(`http://localhost:3600/deleteBook/${id}?email=${email}`)\n      .then(result => {\n        this.setState({\n          booksArr: result.data\n        })\n      })\n      .catch(error => {\n        console.log('Error');\n      })\n  }\n  handleClose = () => {\n    this.setState({\n      show: false,\n      showFlag: false\n    })\n  }\n  handleShow = () => {\n    this.setState({\n      show: true,\n    })\n  }\n  showUpdateForm = (item) => {\n    this.setState({\n      showFlag: true,\n      title: item.title,\n      description: item.description,\n      status: item.status,\n      bookId: item._id\n    })\n  }\n\n  updateBook = (event) => {\n    event.preventDefault()\n    const { user } = this.props.auth0\n    const email = user.email\n    const obj = {\n      title: event.target.title.value,\n      description: event.target.description.value,\n      status: event.target.status.value,\n      email: email\n    }\n    axios\n      .put(`http://localhost:3600/updateBook/${this.state.bookId}`, obj)\n      .then(result => {\n        this.setState({\n          booksArr: result.data,\n          showFlag: false\n        })\n\n      })\n      .catch(error => {\n        console.log('Error');\n      })\n  }\n\n\n  render() {\n    return (\n      <>\n        <Button variant=\"primary\" onClick={this.handleShow}>\n          Launch demo modal\n        </Button>\n\n        <Modal show={this.state.show} onHide={this.handleClose}>\n          <Modal.Header closeButton>\n            <Modal.Title>Modal heading</Modal.Title>\n          </Modal.Header>\n          <Modal.Footer>\n            <Button variant=\"secondary\" onClick={this.handleClose}>\n              Close\n            </Button>\n            <Button variant=\"primary\" onClick={this.handleClose}>\n              Save Changes\n            </Button>\n          </Modal.Footer>\n        </Modal>\n\n        {/* <Button variant=\"primary\" onClick={this.handleShow}>\n          add a book\n        </Button> */}\n\n        {/* <Modal>\n          <Modal.Header closeButton>\n            <Modal.Title>Modal heading</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>Woohoo, you're reading this text in a modal!</Modal.Body>\n          <Form onSubmit={this.addBook} >\n            <Form.Group className=\"mb-3\">\n              <Form.Label>Book title</Form.Label>\n              <Form.Control type=\"text\" name='title' />\n            </Form.Group>\n            <Form.Group className=\"mb-3\">\n              <Form.Label>Description</Form.Label>\n              <Form.Control type=\"text\" name='description' />\n            </Form.Group>\n            <Form.Group >\n              <Form.Select name='status'>\n                <option value='available'>Available</option>\n                <option value='not available'>Not Available</option>\n              </Form.Select>\n            </Form.Group>\n            <Button variant=\"primary\" type=\"submit\">\n              Add book\n            </Button>\n          </Form>\n        </Modal> */}\n        {this.state.booksArr.map((item) => {\n          return (\n            <BookCard\n              item={item}\n              deleteBook={this.deleteBook}\n              showUpdateForm={this.showUpdateForm}\n            />\n          )\n        })}\n\n        <BookUpdateForm\n          show={this.state.showFlag}\n          handleClose={this.handleClose}\n          title={this.state.title}\n          description={this.state.description}\n          status={this.state.status}\n          updateBook={this.updateBook}\n        />\n      </>\n    )\n  }\n}\n\nexport default withAuth0(MyFavoriteBooks)"]},"metadata":{},"sourceType":"module"}
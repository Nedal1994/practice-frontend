{"ast":null,"code":"var _jsxFileName = \"/home/nedal/practice-frontend/src/BestMovies.js\";\nimport React from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './BestMovies.css';\nimport { withAuth0 } from '@auth0/auth0-react';\nimport axios from 'axios';\nimport MovieCard from './MovieCard';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport Modal from 'react-bootstrap/Modal';\nimport MovieUpdateForm from './MovieUpdateForm';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass BestMovies extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.componentDidMount = () => {\n      const {\n        user\n      } = this.props.auth0;\n      const email = user.email;\n      axios.get(`http://localhost:3600/getMovies?email=${email}`).then(result => {\n        this.setState({\n          moviesArr: result.data\n        });\n      }).catch(error => {\n        console.log('error');\n      });\n    };\n\n    this.addMovie = event => {\n      event.preventDefault();\n      const {\n        user\n      } = this.props.auth0;\n      const email = user.email;\n      const obj = {\n        title: event.target.title.value,\n        overview: event.target.overview.value,\n        release_date: event.target.release_date.value,\n        popularity: event.target.popularity.value,\n        email: email\n      };\n      axios.post(`http://localhost:3600/addMovie?email=${email}`, obj).then(result => {\n        this.setState({\n          moviesArr: result.data\n        });\n      }).catch(error => {\n        console.log('Error');\n      });\n    };\n\n    this.deleteMovie = id => {\n      const {\n        user\n      } = this.props.auth0;\n      const email = user.email;\n      axios.delete(`http://localhost:3600/deleteMovie/${id}?email=${email}`).then(result => {\n        this.setState({\n          moviesArr: result.data\n        });\n      }).catch(error => {\n        console.log('Error');\n      });\n    };\n\n    this.handleClose = () => {\n      this.setState({\n        show: false,\n        showFlag: false\n      });\n    };\n\n    this.handleShow = () => {\n      this.setState({\n        show: true\n      });\n    };\n\n    this.showUpdateForm = item => {\n      this.setState({\n        showFlag: true,\n        title: item.title,\n        overview: item.overview,\n        popularity: item.popularity,\n        release_date: item.release_date,\n        movieId: item._id\n      });\n    };\n\n    this.updateMovie = event => {\n      event.preventDefault();\n      const {\n        user\n      } = this.props.auth0;\n      const email = user.email;\n      const obj = {\n        title: event.target.title.value,\n        overview: event.target.overview.value,\n        release_date: event.target.release_date.value,\n        popularity: event.target.popularity.value,\n        email: email\n      };\n      axios.put(`http://localhost:3600/updateMovie/${this.state.bookId}`, obj).then(result => {\n        this.setState({\n          moviesArr: result.data,\n          showFlag: false\n        });\n      }).catch(error => {\n        console.log('Error');\n      });\n    };\n\n    this.getMovieData = async (event) => {\n      event.preventDefault();\n      const cityName = event.target.cityName.value; // const movieUrl = `https://lap10.herokuapp.com/movies?name=${cityName}`\n\n      const movieUrl = `http://localhost:3600/movies?name=${cityName}`;\n      console.log('ok');\n\n      try {\n        let result = await axios.get(movieUrl);\n        console.log(result);\n        this.setState({\n          moviesData: result.data,\n          display: true\n        });\n        const jsonData = await axios.get(movieUrl);\n        this.setState({\n          moviesData: jsonData.data\n        });\n        console.log(this.state.moviesData);\n      } catch {\n        this.setState({\n          displayError: true\n        });\n      }\n    };\n\n    this.state = {\n      moviesArr: [],\n      show: false,\n      showFlag: false,\n      title: '',\n      overview: '',\n      release_date: '',\n      popularity: '',\n      movieId: ''\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Form, {\n        onSubmit: this.getMovieData,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"City name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 33\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"cityName\",\n          id: \"citytext\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 59\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 64\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          children: \"Get location\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"primary\",\n        onClick: this.handleShow,\n        children: \"add a book\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        show: this.state.show,\n        onHide: this.handleClose,\n        children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n          closeButton: true,\n          children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n            children: \"Modal heading\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n          children: \"Woohoo, you're reading this text in a modal!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form, {\n          onSubmit: this.addBook,\n          children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Movie title\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"text\",\n              name: \"title\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Overview\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"text\",\n              name: \"overview\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Popularity\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"text\",\n              name: \"popularity\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Release date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"text\",\n              name: \"release_date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            type: \"submit\",\n            children: \"Add movie\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }, this), this.state.moviesArr.map(item => {\n        return /*#__PURE__*/_jsxDEV(MovieCard, {\n          item: item,\n          deleteMovie: this.deleteMovie,\n          showUpdateForm: this.showUpdateForm\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 13\n        }, this);\n      }), /*#__PURE__*/_jsxDEV(MovieUpdateForm, {\n        show: this.state.showFlag,\n        handleClose: this.handleClose,\n        title: this.state.title,\n        overview: this.state.overview,\n        popularity: this.state.popularity,\n        release_date: this.state.release_date,\n        updateMovie: this.updateMovie\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n\n}\n\nexport default _c = withAuth0(BestMovies);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["/home/nedal/practice-frontend/src/BestMovies.js"],"names":["React","withAuth0","axios","MovieCard","Form","Button","Modal","MovieUpdateForm","BestMovies","Component","constructor","props","componentDidMount","user","auth0","email","get","then","result","setState","moviesArr","data","catch","error","console","log","addMovie","event","preventDefault","obj","title","target","value","overview","release_date","popularity","post","deleteMovie","id","delete","handleClose","show","showFlag","handleShow","showUpdateForm","item","movieId","_id","updateMovie","put","state","bookId","getMovieData","cityName","movieUrl","moviesData","display","jsonData","displayError","render","addBook","map"],"mappings":"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","sourcesContent":["import React from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './BestMovies.css';\nimport { withAuth0 } from '@auth0/auth0-react'\nimport axios from 'axios'\nimport MovieCard from './MovieCard'\nimport Form from 'react-bootstrap/Form'\nimport Button from 'react-bootstrap/Button'\nimport Modal from 'react-bootstrap/Modal'\nimport MovieUpdateForm from './MovieUpdateForm';\n\nclass BestMovies extends React.Component {\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      moviesArr: [],\n      show: false,\n      showFlag: false,\n      title:'',\n      overview:'',\n      release_date:'',\n      popularity:'',\n      movieId:''\n    }\n  }\n\n  componentDidMount = () => {\n    const { user } = this.props.auth0\n    const email = user.email\n    axios\n      .get(`http://localhost:3600/getMovies?email=${email}`)\n      .then(result => {\n        this.setState({\n          moviesArr: result.data\n        })\n      })\n      .catch(error => {\n        console.log('error');\n      })\n  }\n  addMovie = (event) => {\n    event.preventDefault()\n    const { user } = this.props.auth0\n    const email = user.email\n    const obj = {\n      title: event.target.title.value,\n      overview: event.target.overview.value,\n      release_date: event.target.release_date.value,\n      popularity: event.target.popularity.value,\n      email: email\n    }\n    axios\n      .post(`http://localhost:3600/addMovie?email=${email}`, obj)\n      .then(result => {\n        this.setState({\n          moviesArr: result.data\n        })\n\n      })\n      .catch(error => {\n        console.log('Error');\n      })\n  }\n\n  deleteMovie = (id) => {\n    const { user } = this.props.auth0\n    const email = user.email\n    axios\n      .delete(`http://localhost:3600/deleteMovie/${id}?email=${email}`)\n      .then(result => {\n        this.setState({\n          moviesArr: result.data\n        })\n      })\n      .catch(error => {\n        console.log('Error');\n      })\n  }\n  handleClose = () => {\n    this.setState({\n      show: false,\n      showFlag:false\n    })\n  }\n  handleShow = () => {\n    this.setState({\n      show: true,\n    })\n  }\n  showUpdateForm = (item)=>{\n    this.setState({\n      showFlag:true,\n      title:item.title,\n      overview:item.overview,\n      popularity:item.popularity,\n      release_date:item.release_date,\n      movieId:item._id\n    })\n  }\n\n  updateMovie = (event) =>{\n    event.preventDefault()\n    const { user } = this.props.auth0\n    const email = user.email\n    const obj = {\n      title: event.target.title.value,\n      overview: event.target.overview.value,\n      release_date: event.target.release_date.value,\n      popularity: event.target.popularity.value,\n      email: email\n    }\n    axios\n      .put(`http://localhost:3600/updateMovie/${this.state.bookId}`,obj)\n      .then(result => {\n        this.setState({\n          moviesArr: result.data,\n          showFlag:false\n        })\n\n      })\n      .catch(error => {\n        console.log('Error');\n      })\n  }\n\n  getMovieData = async(event) =>\n{\n  event.preventDefault()\n  const cityName = event.target.cityName.value\n  // const movieUrl = `https://lap10.herokuapp.com/movies?name=${cityName}`\n  const movieUrl = `http://localhost:3600/movies?name=${cityName}`\n  \nconsole.log('ok')\n  try{\n\n    let result = await axios.get(movieUrl)\n    console.log(result)\n    this.setState({\n\n    moviesData: result.data,\n    display : true,\n  })\n      const jsonData = await axios.get(movieUrl)\n\n this.setState({\n   moviesData:jsonData.data,\n })\n console.log(this.state.moviesData);\n}\n\ncatch\n{\nthis.setState({\n  displayError:true\n})\n}\n}\n  \n\n  render() {\n    return (\n      <>\n            <Form onSubmit={this.getMovieData}>\n        <label>City name</label><br/>\n        <input type='text' name='cityName' id='citytext'/><br/><br/>   \n        <Button type='submit'>Get location</Button>\n      </Form>\n\n      {/* <img src={`https://maps.locationiq.com/v3/staticmap?key=${process.env.REACT_APP_KEY}&center=${this.state.lat},${this.state.lon}&zoom=18&size=500x500&format=png&maptype=<MapType>&markers=icon:<icon>|<latitude>,<longitude>&markers=icon:<icon>|<latitude>,<longitude>`}/> */}\n      \n        <Button variant=\"primary\" onClick={this.handleShow}>\n          add a book\n        </Button>\n\n        <Modal show={this.state.show} onHide={this.handleClose}>\n          <Modal.Header closeButton>\n            <Modal.Title>Modal heading</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>Woohoo, you're reading this text in a modal!</Modal.Body>\n          <Form onSubmit={this.addBook} >\n            <Form.Group className=\"mb-3\">\n              <Form.Label>Movie title</Form.Label>\n              <Form.Control type=\"text\" name='title' />\n            </Form.Group>\n            <Form.Group className=\"mb-3\">\n              <Form.Label>Overview</Form.Label>\n              <Form.Control type=\"text\" name='overview' />\n            </Form.Group>\n            <Form.Group className=\"mb-3\">\n              <Form.Label>Popularity</Form.Label>\n              <Form.Control type=\"text\" name='popularity' />\n            </Form.Group>\n            <Form.Group className=\"mb-3\">\n              <Form.Label>Release date</Form.Label>\n              <Form.Control type=\"text\" name='release_date' />\n            </Form.Group>\n            <Button variant=\"primary\" type=\"submit\">\n              Add movie\n            </Button>\n          </Form>\n        </Modal>\n        {this.state.moviesArr.map((item) => {\n          return (\n            <MovieCard \n            item={item} \n            deleteMovie={this.deleteMovie} \n            showUpdateForm={this.showUpdateForm}\n            />\n          )\n        })}\n\n        <MovieUpdateForm\n        show = {this.state.showFlag}\n        handleClose = {this.handleClose}\n        title={this.state.title}\n        overview={this.state.overview}\n        popularity={this.state.popularity}\n        release_date={this.state.release_date}\n        updateMovie ={this.updateMovie}\n        />\n      </>\n    )\n  }\n}\n\nexport default withAuth0(BestMovies)"]},"metadata":{},"sourceType":"module"}